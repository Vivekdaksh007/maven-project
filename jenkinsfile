pipeline
{
    agent any
    stages
    {
        stage('SCM checkout')
         { steps { git branch: 'master' , url: 'https://github.com/Vivekdaksh007/maven-project'  } }

        stage('build the code')
        { steps { withMaven(jdk: 'JAVA_HOME', maven: 'MAVEN_HOME') 
         { sh 'mvn package'}
         
         }}

        stage('deploy to dev')
         {
             steps
               {
                sshagent(['jenkins-tomcat-ci-cd']) 
                { sh 'scp -o StrictHostKeyChecking=no **/*.war ec2-user@172.31.45.221:/usr/share/tomcat/webapps'}
                  }

          }
      

    }

}